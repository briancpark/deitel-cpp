<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD><TITLE>CImageSample Class</TITLE>
<STYLE>
<!--
.tctop {color: blue}
.cpslug {color: blue; text-decoration: none}
-->
</STYLE>
<SCRIPT LANGUAGE="JAVASCRIPT">
//<!--
function ShowButtons() {
    if (window.top.frames.length!=0 && window.top.frames[0].ShowButtons!=null)
	window.top.frames[0].ShowButtons('/dssd0222.htm','/dssd0000.htm','/dssd0180.htm','/index.htm','/dssd0224.htm');
}
ShowButtons();
//-->
</SCRIPT>
</HEAD>
<BODY onLoad="ShowButtons()" TOPMARGIN=10 BGPROPERTIES="FIXED" BGCOLOR="#FFFFFF" LINK="#000000" VLINK="#808080" ALINK="#000000">
<FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">
<H2><A NAME="Lib_000106022b000000">CImageSample Class</A></H2>
<BR CLEAR=ALL>
<P><IMG SRC="art/wutil03.gif" WIDTH="219" HEIGHT="83" ALT="CImageSample class hierarchy" >

<P>This class inherits from <A HREF="dssd0228.htm" TARGET="TEXT">CMediaSample</A> and overrides the constructor to initialize itself with the <A HREF="dssd0287.htm#structs_0001060501000f00" TARGET="TEXT">DIBDATA</A> structure. When the renderer is using its own allocator, it will use this class for its
samples. It can therefore obtain the <A HREF="dssd0389.htm#external_00010a0109000020" TARGET="TEXT">DIBSECTION</A> structure information it requires to obtain the <A HREF="dssd0389.htm#external_00010a0109000037" TARGET="TEXT">HBITMAP</A> data it renders.

<A NAME="Lib_000106022b010000"></A><P><B>Protected Data Members</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="Lib_000106022b010001">m_bInit</A></B>
</FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Flag to determine if the <A HREF="dssd0389.htm#external_00010a0109000020" TARGET="TEXT">DIBSECTION</A> structure information is initialized.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B><A NAME="Lib_000106022b010002">m_DibData</A></B>
</FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Information about the sample's <A HREF="dssd0389.htm#external_00010a0109000020" TARGET="TEXT">DIBSECTION</A> structure.
</FONT></TD></TR></TABLE>
<A NAME="Lib_000106022b020000"></A><P><B>Member Functions</B>
<TABLE BORDER=0>
<TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Name </B></FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><B>Description
</B></FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0223.htm#Lib_000106022b020100" TARGET="TEXT">CImageSample</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Constructs a <A HREF="dssd0223.htm" TARGET="TEXT">CImageSample</A> object.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0223.htm#Lib_000106022b020200" TARGET="TEXT">GetDIBData</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Retrieves the <A HREF="dssd0389.htm#external_00010a0109000020" TARGET="TEXT">DIBSECTION</A> structure information stored for the sample.
</FONT></TD></TR><TR><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2"><A HREF="dssd0223.htm#Lib_000106022b020300" TARGET="TEXT">SetDIBData</A>
 </FONT></TD><TD ALIGN=LEFT VALIGN=TOP><FONT FACE="VERDANA,ARIAL,HELVETICA" SIZE="2">Sets the <A HREF="dssd0389.htm#external_00010a0109000020" TARGET="TEXT">DIBSECTION</A> information stored for the sample.
</FONT></TD></TR></TABLE>
<H3><HR COLOR=#0000FF><A NAME="Lib_000106022b020100">CImageSample::CImageSample</A></H3>
<A HREF="dssd0223.htm" TARGET="TEXT">CImageSample Class</A>
<P>Constructs a <A HREF="dssd0223.htm" TARGET="TEXT">CImageSample</A> object.

<P><B>CImageSample</B><B>(</B><BR>&nbsp;&nbsp;<B>CBaseAllocator</B> <I>*pAllocator</I><B>,</B><BR>&nbsp;&nbsp;<B>TCHAR</B> <I>*pName</I><B>,</B><BR>&nbsp;&nbsp;<B>HRESULT</B> <I>*phr</I><B>,</B><BR>&nbsp;&nbsp;<B>LPBYTE</B> <I>pBuffer</I><B>,</B><BR>&nbsp;&nbsp;<B>LONG</B> <I>length</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pAllocator</I>
 </DT><DD>Base allocator to which the sample belongs.
</DD><DT><I>pName</I>
 </DT><DD>Debug-only string description.
</DD><DT><I>phr</I>
 </DT><DD>OLE return code.
</DD><DT><I>pBuffer</I>
 </DT><DD>Pointer to the image buffer.
</DD><DT><I>length</I>
 </DT><DD>Length of the image buffer.
</DD></DL>
<H5>Return Values</H5>
<P>No return value.
<H5>Remarks</H5>
<P>The <A HREF="dssd0220.htm" TARGET="TEXT">CImageAllocator</A>, <A HREF="dssd0223.htm" TARGET="TEXT">CImageSample</A>, and
<A HREF="dssd0214.htm" TARGET="TEXT">CDrawImage</A> classes are all tightly associated. The buffers that the image
allocator creates are made by using the Microsoft&#174; Win32&#174; <A HREF="dssd0389.htm#external_00010a0109000013" TARGET="TEXT">CreateDIBSection</A> function.
The allocator then creates its own samples (based on the <B>CImageSample</B> class).
The image samples are initialized with the buffer pointer and its length. The sample is also
passed in a structure (a <A HREF="dssd0287.htm#structs_0001060501000f00" TARGET="TEXT">DIBDATA</A> structure) that holds a number of pieces of information
obtained from the <B>CreateDIBSection</B> call.

<P>These samples can then be passed to the draw object. The draw object knows
the private format of the samples and how to get back the <A HREF="dssd0287.htm#structs_0001060501000f00" TARGET="TEXT">DIBDATA</A> structure
from them. Once it has obtained that information, it can pass a bitmap handle,
which is stored in the <B>DIBDATA</B> structure, down into GDI when it draws the image that
the sample contains. By using the bitmap handle from the sample in the
drawing, rather than just the buffer pointer (which is the alternative if
the sample is not a <A HREF="dssd0223.htm" TARGET="TEXT">CImageSample</A>), it achieves a modest performance improvement.
<H3><HR COLOR=#0000FF><A NAME="Lib_000106022b020200">CImageSample::GetDIBData</A></H3>
<A HREF="dssd0223.htm" TARGET="TEXT">CImageSample Class</A>
<P>Retrieves the <A HREF="dssd0287.htm#structs_0001060501000f00" TARGET="TEXT">DIBDATA</A> structure held by the sample.


<P><B>DIBDATA</B> <B>*GetDIBData</B><B>(</B> <B>)</B><B>;</B><BR><H3><HR COLOR=#0000FF><A NAME="Lib_000106022b020300">CImageSample::SetDIBData</A></H3>
<A HREF="dssd0223.htm" TARGET="TEXT">CImageSample Class</A>
<P>Sets the <A HREF="dssd0287.htm#structs_0001060501000f00" TARGET="TEXT">DIBDATA</A> structure that the sample should hold.

<P><B>void</B> <B>SetDIBData</B><B>(</B><BR>&nbsp;&nbsp;<B>DIBDATA</B> <I>*pDibData</I><BR>&nbsp;&nbsp;<B>)</B><B>;</B><BR><H5>Parameters</H5>
<DL><DT><I>pDibData</I>
 </DT><DD>New <A HREF="dssd0287.htm#structs_0001060501000f00" TARGET="TEXT">DIBDATA</A> structure.
</DD></DL>
<H5>Return Values</H5>
<P>No return value.
<P><P><FONT FACE="MS SANS SERIF" SIZE="1" COLOR="BLACK">
<A CLASS=cpslug HREF="copyrite.htm" TARGET="TEXT">&#169; 1997 Microsoft Corporation. All rights reserved. Terms of Use.</A>
</FONT>
<BR CLEAR=ALL><P>
</FONT><P>
</BODY></HTML>
